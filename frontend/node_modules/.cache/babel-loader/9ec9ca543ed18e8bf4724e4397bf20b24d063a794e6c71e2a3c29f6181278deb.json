{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User hp\\\\Documents\\\\ITP\\\\PROYECTODIP\\\\Voluntariado\\\\frontend\\\\src\\\\components\\\\LoginForm\\\\LoginForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport \"./LoginForm.css\";\nimport VoluntariadoLogo from \"../../assets/photos/logo.png\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport WrongAlert from \"../../components/alerts/WrongAlert\";\nimport SuccessAlert from \"../../components/alerts/SuccessAlert\";\nimport { getUserData, login } from \"../../services/auth/AuthService\";\nimport RedirectAlert from \"../alerts/RedirectAlert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginForm() {\n  _s();\n  const Navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    correo: \"\",\n    contrasena: \"\"\n  });\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      var _response$response, _response$response2;\n      const response = await login(formData.correo, formData.contrasena);\n\n      // Si el backend devuelve un objeto con 'status' o 'message', se valida:\n      if ((response === null || response === void 0 ? void 0 : response.status) === 401 || (response === null || response === void 0 ? void 0 : (_response$response = response.response) === null || _response$response === void 0 ? void 0 : _response$response.status) === 401) {\n        WrongAlert({\n          title: \"Credenciales inválidas\",\n          message: \"El correo o la contraseña no son correctos.\"\n        });\n        return;\n      }\n      if ((response === null || response === void 0 ? void 0 : response.status) >= 500 || (response === null || response === void 0 ? void 0 : (_response$response2 = response.response) === null || _response$response2 === void 0 ? void 0 : _response$response2.status) >= 500) {\n        WrongAlert({\n          title: \"Error del servidor\",\n          message: \"Hubo un problema interno. Intenta más tarde.\"\n        });\n        return;\n      }\n      if (!response || response !== null && response !== void 0 && response.response) {\n        WrongAlert({\n          title: \"Error de conexión\",\n          message: \"No se pudo conectar con el servidor.\"\n        });\n        return;\n      }\n      const confirmed = await RedirectAlert({\n        title: \"¡Inicio de sesión exitoso!\",\n        message: \"Serás redirigido al inicio.\"\n      });\n      if (confirmed) {\n        Navigate(\"/home\"); // 👈 redirige solo si el usuario confirma\n      }\n    } catch (error) {\n      console.error(\"Error en login:\", error);\n      WrongAlert({\n        title: \"Error inesperado\",\n        message: \"Ocurrió un problema. Por favor, intenta de nuevo.\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"login-form\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"login-form-title\",\n      children: \"Inicia Sesi\\xF3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"login-form-label\",\n      children: \"Correo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"login-form-input\",\n      type: \"text\",\n      name: \"correo\",\n      value: formData.correo,\n      onChange: handleChange,\n      placeholder: \"ejemplo@ejemplo.com\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"login-form-label\",\n      children: \"Contrase\\xF1a\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"login-form-input\",\n      type: \"password\",\n      name: \"contrasena\",\n      value: formData.contrasena,\n      onChange: handleChange,\n      placeholder: \"Contrase\\xF1a\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"login-form-button\",\n      type: \"submit\",\n      children: \"Iniciar Sesi\\xF3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"login-form-no-account\",\n      children: [\"\\xBFNo tienes una cuenta?\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/register\",\n        className: \"login-form-no-account-link\",\n        children: \"Reg\\xEDstrate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"login-form-logo-img\",\n      src: VoluntariadoLogo,\n      alt: \"Voluntariado Logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginForm, \"bP2Yw/RPf7zBrEU5dNTRVE58S5k=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useState","VoluntariadoLogo","useNavigate","useAuth","WrongAlert","SuccessAlert","getUserData","login","RedirectAlert","jsxDEV","_jsxDEV","LoginForm","_s","Navigate","formData","setFormData","correo","contrasena","handleChange","e","name","value","target","handleSubmit","preventDefault","_response$response","_response$response2","response","status","title","message","confirmed","error","console","className","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","placeholder","href","src","alt","_c","$RefreshReg$"],"sources":["C:/Users/User hp/Documents/ITP/PROYECTODIP/Voluntariado/frontend/src/components/LoginForm/LoginForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./LoginForm.css\";\r\nimport VoluntariadoLogo from \"../../assets/photos/logo.png\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport WrongAlert from \"../../components/alerts/WrongAlert\";\r\nimport SuccessAlert from \"../../components/alerts/SuccessAlert\";\r\nimport { getUserData, login } from \"../../services/auth/AuthService\";\r\nimport RedirectAlert from \"../alerts/RedirectAlert\";\r\n\r\nfunction LoginForm() {\r\n  const Navigate = useNavigate();\r\n\r\n  const [formData, setFormData] = useState({\r\n    correo: \"\",\r\n    contrasena: \"\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const response = await login(formData.correo, formData.contrasena);\r\n\r\n      // Si el backend devuelve un objeto con 'status' o 'message', se valida:\r\n      if (response?.status === 401 || response?.response?.status === 401) {\r\n        WrongAlert({\r\n          title: \"Credenciales inválidas\",\r\n          message: \"El correo o la contraseña no son correctos.\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (response?.status >= 500 || response?.response?.status >= 500) {\r\n        WrongAlert({\r\n          title: \"Error del servidor\",\r\n          message: \"Hubo un problema interno. Intenta más tarde.\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (!response || response?.response) {\r\n        WrongAlert({\r\n          title: \"Error de conexión\",\r\n          message: \"No se pudo conectar con el servidor.\",\r\n        });\r\n        return;\r\n      }\r\n      const confirmed = await RedirectAlert({\r\n        title: \"¡Inicio de sesión exitoso!\",\r\n        message: \"Serás redirigido al inicio.\",\r\n      });\r\n      if (confirmed) {\r\n        Navigate(\"/home\"); // 👈 redirige solo si el usuario confirma\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error en login:\", error);\r\n      WrongAlert({\r\n        title: \"Error inesperado\",\r\n        message: \"Ocurrió un problema. Por favor, intenta de nuevo.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"login-form\" onSubmit={handleSubmit}>\r\n      <h1 className=\"login-form-title\">Inicia Sesión</h1>\r\n\r\n      <label className=\"login-form-label\">Correo</label>\r\n      <input\r\n        className=\"login-form-input\"\r\n        type=\"text\"\r\n        name=\"correo\"\r\n        value={formData.correo}\r\n        onChange={handleChange}\r\n        placeholder=\"ejemplo@ejemplo.com\"\r\n      />\r\n\r\n      <label className=\"login-form-label\">Contraseña</label>\r\n      <input\r\n        className=\"login-form-input\"\r\n        type=\"password\"\r\n        name=\"contrasena\"\r\n        value={formData.contrasena}\r\n        onChange={handleChange}\r\n        placeholder=\"Contraseña\"\r\n      />\r\n\r\n      <button className=\"login-form-button\" type=\"submit\">\r\n        Iniciar Sesión\r\n      </button>\r\n\r\n      <p className=\"login-form-no-account\">\r\n        ¿No tienes una cuenta?{\" \"}\r\n        <a href=\"/register\" className=\"login-form-no-account-link\">\r\n          Regístrate\r\n        </a>\r\n      </p>\r\n\r\n      <img\r\n        className=\"login-form-logo-img\"\r\n        src={VoluntariadoLogo}\r\n        alt=\"Voluntariado Logo\"\r\n      />\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default LoginForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}